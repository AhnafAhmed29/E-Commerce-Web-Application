{% extends "base.html" %}

{% block title %}{{ product.name }} - EZ Gadgets{% endblock %}

{% block content %}
<div class="container" style="margin-top: 30px; margin-bottom: 60px;">
    <!-- Breadcrumb -->
    <div style="margin-bottom: 20px; font-size: 0.9rem; color: #666;">
        <a href="{{ url_for('index') }}" style="color: #666;">Home</a> / 
        {% if product.category %}
        <a href="{{ url_for('products', category=product.category.slug) }}" style="color: #666;">{{ product.category.name }}</a> / 
        {% endif %}
        <span style="color: #333;">{{ product.name }}</span>
    </div>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 60px;">
        <!-- Product Images -->
        <div>
            {% if product.is_hot %}
            <div style="position: absolute; top: 10px; left: 10px; z-index: 10;">
                <span class="badge badge-hot">HOT</span>
            </div>
            {% endif %}
            
            <div style="background: #f8f8f8; padding: 30px; border-radius: 10px; margin-bottom: 15px;">
                <img src="{{ product.main_image or 'https://via.placeholder.com/500?text=' + product.name }}" alt="{{ product.name }}" style="width: 100%; height: auto;">
            </div>
            
            {% if product.image_2 or product.image_3 or product.image_4 %}
            <div style="display: flex; gap: 10px;">
                {% for img in product.get_images()[1:] %}
                <div style="flex: 1; background: #f8f8f8; padding: 15px; border-radius: 5px; cursor: pointer;">
                    <img src="{{ img }}" alt="{{ product.name }}">
                </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <!-- Product Info -->
        <div>
            <div style="background: #d9534f; color: #fff; display: inline-block; padding: 8px 15px; border-radius: 20px; font-size: 0.85rem; margin-bottom: 15px;">
                ‚ö° Fast delivery within 24-48 Hours (Depending on location)
            </div>
            
            <h1 style="font-size: 2rem; margin-bottom: 15px; color: #1a0f2e;">{{ product.name }}</h1>
            
            <div style="margin-bottom: 20px;">
                <div style="display: flex; align-items: center; gap: 15px; font-size: 2.5rem; font-weight: bold; color: #1a0f2e;">
                    <span>‡ß≥ {{ "%.2f"|format(product.price) }}</span>
                    {% if product.has_discount %}
                    <span style="font-size: 1.5rem; color: #999; text-decoration: line-through;">‡ß≥ {{ "%.2f"|format(product.original_price) }}</span>
                    {% endif %}
                </div>
            </div>
            
            <div style="margin-bottom: 25px; padding: 15px; background: #f8f8f8; border-radius: 8px;">
                <h3 style="font-size: 1rem; margin-bottom: 10px;">Quick Overview</h3>
                <ul style="list-style: none; padding-left: 20px;">
                    {% if product.short_description %}
                    {% for line in product.short_description.split('\n') %}
                    <li style="margin-bottom: 5px;">‚úì {{ line }}</li>
                    {% endfor %}
                    {% else %}
                    <li style="margin-bottom: 5px;">‚úì Switch / PC / Android / iOS / Steam compatible</li>
                    <li style="margin-bottom: 5px;">‚úì Bluetooth / 2.4G / Wired connection</li>
                    <li style="margin-bottom: 5px;">‚úì Anti-drift GameSir Mag-Ris‚Ñ¢ TMR sticks</li>
                    <li style="margin-bottom: 5px;">‚úì Switchable Hall Effect or Micro Switch triggers</li>
                    {% endif %}
                </ul>
            </div>
            
            <!-- Color/Edition Selection (Placeholder) -->
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Color:</label>
                <select class="form-control" style="width: 100%; max-width: 300px;">
                    <option>Choose an option</option>
                </select>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Edition:</label>
                <select class="form-control" style="width: 100%; max-width: 300px;">
                    <option>Choose an option</option>
                </select>
            </div>
            
            <!-- Quantity and Add to Cart -->
            <div style="display: flex; gap: 15px; margin-bottom: 25px;">
                <div>
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Quantity:</label>
                    <input type="number" value="1" min="1" max="{{ product.stock }}" class="form-control" id="quantity" style="width: 80px; text-align: center;">
                </div>
                
                <div style="flex: 1;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">&nbsp;</label>
                    {% if product.is_in_stock %}
                    <form action="{{ url_for('add_to_cart') }}" method="post">
                        <input type="hidden" name="product_id" value="{{ product.id }}">
                        <input type="hidden" name="quantity" value="1" id="cart-quantity">
                        <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px; font-size: 1.1rem;">Add To Cart</button>
                    </form>
                    {% else %}
                    <button class="btn btn-primary" style="width: 100%; padding: 15px; font-size: 1.1rem; opacity: 0.6;" disabled>Out of Stock</button>
                    {% endif %}
                </div>
                
                <div>
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">&nbsp;</label>
                    <button class="btn btn-secondary" style="padding: 15px 25px; font-size: 1.1rem;">Buy Now</button>
                </div>
            </div>
            


            <!-- Add to Wishlist Button -->
            <div style="margin-top: 15px;">
                {% if current_user.is_authenticated %}
                <form method="POST" action="{{ url_for('add_to_wishlist', product_id=product.id) }}" style="width: 100%;">
                    <button type="submit" class="btn" style="width: 100%; background: white; color: #1a0f2e; border: 2px solid #f4d03f; padding: 12px; font-weight: 600; transition: all 0.3s;">
                        ‚ù§Ô∏è Add to Wishlist
                    </button>
                </form>
                {% else %}
                <a href="{{ url_for('login') }}" class="btn" style="display: block; width: 100%; text-align: center; background: white; color: #1a0f2e; border: 2px solid #f4d03f; padding: 12px; font-weight: 600; text-decoration: none;">
                    ‚ù§Ô∏è Login to Add to Wishlist
                </a>
                {% endif %}
            </div>


            <!-- Actions -->
            <div style="display: flex; gap: 15px; margin-bottom: 25px;">
                <button class="btn" style="border: 1px solid #ddd; background: #fff; padding: 10px 20px;">üîó Add to compare</button>
                <div style="margin-left: auto;">
                    <span style="font-weight: 600;">Share:</span>
                    <a href="#" style="margin-left: 10px;">f</a>
                    <a href="#" style="margin-left: 10px;">ùïè</a>
                    <a href="#" style="margin-left: 10px;">üìß</a>
                    <a href="#" style="margin-left: 10px;">üì±</a>
                </div>
            </div>
            
            <!-- Shipping & Warranty Info -->
            <div style="border: 1px solid #ddd; border-radius: 8px; padding: 20px;">
                <h3 style="font-size: 1.1rem; margin-bottom: 15px;">Shipping & Delivery</h3>
                
                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #eee;">
                    <div style="font-size: 2rem;">üöö</div>
                    <div>
                        <strong>Standard Delivery</strong>
                        <p style="margin: 0; color: #666; font-size: 0.9rem;">1-3 Days | From 60 Tk</p>
                        <p style="margin: 0; color: #666; font-size: 0.85rem;">Our courier will deliver to the specified address</p>
                    </div>
                </div>
                
                <div style="display: flex; align-items: center; gap: 15px;">
                    <div style="font-size: 2rem;">üè™</div>
                    <div>
                        <strong>Store Pickup</strong>
                        <p style="margin: 0; color: #666; font-size: 0.9rem;">Instant | Free</p>
                        <p style="margin: 0; color: #666; font-size: 0.85rem;">Pickup from our physical store.</p>
                        <a href="#" style="color: #007bff; font-size: 0.85rem;">Store Locations</a>
                    </div>
                </div>
                
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                    <h4 style="font-size: 1rem; margin-bottom: 10px;">Warranty Period</h4>
                    <p style="margin: 0; font-size: 0.9rem;">{{ product.warranty_period or '1 Year' }}</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Product Details Tabs -->
    <div style="margin-bottom: 60px;">
        <div style="border-bottom: 2px solid #ddd; margin-bottom: 30px;">
            <button style="padding: 15px 30px; border: none; background: #f4d03f; font-weight: 600; cursor: pointer;">Description</button>
            <button style="padding: 15px 30px; border: none; background: none; font-weight: 600; cursor: pointer;">Specifications</button>
            <button style="padding: 15px 30px; border: none; background: none; font-weight: 600; cursor: pointer;">Reviews (0)</button>
        </div>
        
        <div>
            <h2 style="font-size: 1.8rem; margin-bottom: 20px;">{{ product.name }}</h2>
            
            {% if product.description %}
            <div style="line-height: 1.8; color: #666;">
                {{ product.description|safe }}
            </div>
            {% else %}
            <div style="line-height: 1.8; color: #666;">
                <p>Take full control of your gaming experience with this multi-platform controller ‚Äî a versatile multi-platform gamepad engineered for precision, comfort, and connectivity.</p>
                
                <h3 style="margin: 25px 0 15px;">Tri-Mode Connectivity ‚Äî Play Your Way</h3>
                <p>The controller connects using three reliable modes:</p>
                <ul style="padding-left: 30px; margin: 15px 0;">
                    <li>2.4 GHz Wireless for fast, low-latency performance</li>
                    <li>Bluetooth 5.3 for seamless wireless use</li>
                    <li>USB-C Wired for stable, direct input</li>
                </ul>
                
                <h3 style="margin: 25px 0 15px;">Cross-Platform Compatibility</h3>
                <p>This controller works with a wide range of systems including:</p>
                <ul style="padding-left: 30px; margin: 15px 0;">
                    <li>Xbox Series X|S & Xbox One (via wireless dongle)</li>
                    <li>PlayStation (via Bluetooth or USB)</li>
                    <li>Windows PC</li>
                    <li>Android & iOS devices</li>
                    <li>Nintendo Switch (wireless & wired)</li>
                </ul>
            </div>
            {% endif %}
        </div>
    </div>
    
    <!-- Related Products -->
    {% if related_products %}
    <div>
        <h2 class="section-title">You may also like</h2>
        
        <div class="products-grid">
            {% for product in related_products %}
            <div class="product-card">
                <a href="{{ url_for('product_detail', slug=product.slug) }}">
                    <div class="product-image">
                        <img src="{{ product.main_image or 'https://via.placeholder.com/300?text=' + product.name }}" alt="{{ product.name }}">
                    </div>
                </a>
                
                <div class="product-info">
                    <a href="{{ url_for('product_detail', slug=product.slug) }}">
                        <h3 class="product-title">{{ product.name }}</h3>
                    </a>
                    
                    <div class="product-price">
                        <span class="current-price">‡ß≥ {{ "%.2f"|format(product.price) }}</span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>

<script>
    // Sync quantity input with hidden form field
    document.getElementById('quantity').addEventListener('change', function() {
        document.getElementById('cart-quantity').value = this.value;
    });
</script>
{% endblock %}
